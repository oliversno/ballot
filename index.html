<body>
  <div class="container">
        <form id="make-ballot">
          <input type="radio" name="ballotType" id="fptp" value="First Past the Post">
          <label for="fptp">First Past the Post</label><br>
          <input type="radio" name="ballotType" id="ranked-choice" value="Ranked Choice">
          <label for="ranked-choice">Ranked Choice</label><br>
          <input type="radio" name="ballotType" id="approval" value="Approval Voting">
          <label for="approval">Approval Voting</label><br>


          <button class="btn" type="button" onClick="createBallot(document.getElementById('make-ballot'))">Make ballot!</button>
        </form>
    </div> <!-- container -->
  <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-database.js"></script>
<script>
// Your web app's Firebase configuration
var firebaseConfig = {
apiKey: "AIzaSyByAyDFaMNDwKpfRhAQPk0B70ILYst-oS4",
authDomain: "ballot-d933a.firebaseapp.com",
databaseURL: "https://ballot-d933a.firebaseio.com",
projectId: "ballot-d933a",
storageBucket: "ballot-d933a.appspot.com",
messagingSenderId: "227086842486",
appId: "1:227086842486:web:849611a5373b9fc0ce7d57",
measurementId: "G-Y8X924EG6M"
};
// Initialize Firebase
firebase.initializeApp(firebaseConfig);

function createBallot(form){
  var ballotType = form.elements.ballotType.value;
  var token = generate_token(5);
  firebaseStore(token, ballotType);
}

function firebaseStore(token, ballotType){

  firebase.database().ref('ballots/' + token).set({
    ballotType: ballotType
  });
  return alert('saved' + token + ballotType);
}

function generate_token(length){
    //edit the token allowed characters
    var a = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
    var b = [];  
    for (var i=0; i<length; i++) {
        var j = (Math.random() * (a.length-1)).toFixed(0);
        b[i] = a[j];
    }
    return b.join("");
}

</script>
</body>
